<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Virtualization on taewan&#39;s blog</title>
    <link>http://taewan.kim/categories/virtualization.html</link>
    <description>Recent content in Virtualization on taewan&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sat, 06 Feb 2016 20:47:54 +0900</lastBuildDate>
    <atom:link href="http://taewan.kim/categories/virtualization.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>내 친구 Vagrant를 소개합니다.</title>
      <link>http://taewan.kim/blog/2016/02/06/vagrant_intro/</link>
      <pubDate>Sat, 06 Feb 2016 20:47:54 +0900</pubDate>
      
      <guid>http://taewan.kim/blog/2016/02/06/vagrant_intro/</guid>
      <description>

&lt;p&gt;Vagrant는 가상화 인스턴스를 관리하는 소프트웨어 입니다.
Vagrant는 가상 개발 환경을 생성하고 설정하기 위한 주요 가상화 소프트웨어의 고수준 레퍼입니다.
Vagrant가 지원하는 가상화 기술은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;VirtualBox&lt;/li&gt;
&lt;li&gt;VMware&lt;/li&gt;
&lt;li&gt;KVM&lt;/li&gt;
&lt;li&gt;Linux Container(LXC)&lt;/li&gt;
&lt;li&gt;Docker&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://taewan.kim/images/vagrant/Vagrant.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Vagrant를 사용하여 위의 기술를 기반으로하는 가상화 인스턴스를 효과적으로 생성하고, 일관성을 유지하면서 관리할 수 있습니다.
Vagrant의 가장 매력적인 부분은 가상 인스턴스를 만들고 실행하는 과정이 매우 빠르다는 것입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://taewan.kim/images/vagrant/Vagrantup.jpg&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;Vagrant의 사전적인 의미는 &amp;ldquo;부랑자&amp;rdquo;/&amp;ldquo;정처없는 사람&amp;rdquo; 이라는 사전적인 의미를 갖습니다.
Vagrant는 가상화 이미지를 효과적으로 만들고 테스트하는 유연한 환경이라는 의미로 명명된 것으로 생각됩니다. 쉽게 만들고 쉽게 버릴수 있고 다시 그 상태를 순쉽게 복원할 수 있는 &amp;ldquo;Code as a Infrastructure&amp;rdquo; 개념을 가장 쉽게 반영한 오픈소스 프로젝트입니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://taewan.kim/images/vagrant/vagrant_chilling.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;h2 id=&#34;vagrant-프로젝트:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 프로젝트&lt;/h2&gt;

&lt;p&gt;Vagrant는  2010년 3월에 &amp;ldquo;Mitchell Hashimoto&amp;rdquo;가 시작한 오픈소스 프로젝트입니다.
2016년 2월 현재 최신 버전은 1.8.1입니다. 개발 언어는 Ruby이며 지원 플랫폼은 Linux, FreeBDS, OS X와 MS Window입니다. Vagrant의 주요 개발사는 HashiCorp입니다. HasiCorp는 샌프란시스코에 위치한 오픈소스 기업으로 2012년에 &amp;ldquo;Mitchell Hashimoto&amp;rdquo;가 설립하였습니다.&lt;/p&gt;

&lt;p&gt;Vagrant는 최초에 VirtualBox만을 지원하는 형태로 개발되었습니다. 그후 1.1버전 부터 다른 가상화 기술을 지원하기 시작했습니다. VMware와 KVM은 1.1버전에서 지원이 추가되었습니다. 1.6버전부터 Docker를 지원하게 되었습니다.&lt;/p&gt;

&lt;h2 id=&#34;vagrant-설치:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 설치&lt;/h2&gt;

&lt;p&gt;앞에서 설명한 것처럼 Vagrant는 여러 가상화 프로바이더를 지원하는 툴입니다.
따라서 Vagrant를 설치하기 앞서 앞으로 사용할 가상화 프로바이더를 사전에 설치해야 합니다.&lt;/p&gt;

&lt;p&gt;Vagrant의 기본 가상화 프로바이더는 VirtualBox입니다.
VirtaulBox는 오라클가 프리웨어로 제공하는 가상화 기술입니다. 지원하는 운영체제는 Window, OS X, Linux, Solaris입니다. VirtualBox 설치 파일은 &lt;a href=&#34;https://www.virtualbox.org&#34;&gt;https://www.virtualbox.org&lt;/a&gt; 에서 다운받을 수 있습니다. VirtualBox 설치 파일의 크기는 운영체제에 따라 약간의 차이는 있지만 약 100Mb 내외 입니다.&lt;/p&gt;

&lt;p&gt;Vagrant는 Ruby로 개발된 소프트웨어 입니다. 따라서 RubyGem으로 설치 가능합니다. 그러나 Vagrant 프로젝트에서는 RubyGem을 이용한 설치 보다는 Vargant 홈페지이에서 바이너리를 다운로드 하는 것을 권장하고 있습니다. RubyGem을 사용할 경우 이전 버전이 설치될 가능성이 높기 때문입니다. Vagrant 다운로드 URL은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.vagrantup.com/downloads.html&#34;&gt;https://www.vagrantup.com/downloads.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다운받은 Vagrant 설치 파일로 부터 설치를 완료한 후, Vagrant의 설치는 다음과 같은 명령으로 확인 할 수 있습니다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;taewan:demo taewan$ vagrant version
Installed Version: 1.8.1

Vagrant was unable to check for the latest version of Vagrant.
Please check manually at http://www.vagrantup.com
taewan:demo taewan$
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;vagrant-간단-둘러보기:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 간단 둘러보기&lt;/h2&gt;

&lt;p&gt;Vagrant Quick-Start를 하기 앞서 간단히 Vagrant 가 동작하는 방식에 대하여 알아보겠습니다.
Vagrant는 일반적으로 다음과 같은 단계로 작업을 수행합니다.&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Box 이미지 다운로드&lt;/li&gt;
&lt;li&gt;Box이미지를 이용하여 프로젝트 생성&lt;/li&gt;
&lt;li&gt;프로젝트 최상위 디렉터리에 위치한 Vagrantfile 파일 수정&lt;/li&gt;
&lt;li&gt;프로젝트의 가상 인스턴스 시작&lt;/li&gt;
&lt;li&gt;가상 이미지 접속 및 작업&lt;/li&gt;
&lt;li&gt;가상 이미지 종료&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Vagrant는 프로젝트를 생성하기 앞서 여러 프로젝트가 공통적으로 사용할 Box를 다운로드합니다.
Box란 Vagrant에서 가상 이미지로 사용할 수 있도록 초기 설정된 바이너리 입니다.
Vagrant의 메인 개발사인 hashicorp는 여러 운영체제로 만든 Box를 제공합니다.
hasicorp의 &amp;ldquo;Atlas box catalog&amp;rdquo;에서 Box를 검색하고 다운로드 할 수 있습니다.
Box를 검색하고 다운로드를 지원하는 &amp;ldquo;Atlas box catalog&amp;rdquo;의 URL은 다음과 같습니다.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://atlas.hashicorp.com/boxes/search&#34;&gt;https://atlas.hashicorp.com/boxes/search&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&#34;http://taewan.kim/images/vagrant/atlas.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;&amp;ldquo;Atlas box catalog&amp;rdquo; 혹은 Box의 URL을 통해서 &amp;ldquo;vagrant box add&amp;rdquo; 명령으로 Box를 다운로드 할 수 있습니다.
다운받은 기본 Box는 ~/vagrant.d/boxes 디렉터리에 저장됩니다.
이 디렉터리에는 Box별로 프로바이더 별로 4개의 파일이 저장됩니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;taewan:demo taewan$ vagrant box add  ubuntu/trusty64
==&amp;gt; box: Loading metadata for box &#39;ubuntu/trusty64&#39;
    box: URL: https://atlas.hashicorp.com/ubuntu/trusty64
==&amp;gt; box: Adding box &#39;ubuntu/trusty64&#39; (v20160206.0.0) for provider: virtualbox
    box: Downloading: https://atlas.hashicorp.com/ubuntu/boxes/trusty64/versions/20160206.0.0/providers/virtualbox.box
==&amp;gt; box: Successfully added box &#39;ubuntu/trusty64&#39; (v20160206.0.0) for &#39;virtualbox&#39;!
taewan:demo taewan$ vagrant box list
ubuntu/trusty64 (virtualbox, 20160206.0.0)
taewan:demo taewan$ 
taewan:demo taewan$ ls -al ~/.vagrant.d/boxes/
total 0
drwxr-xr-x  3 taewan  staff  102  2 10 00:00 .
drwxr-xr-x  9 taewan  staff  306  2 10 00:00 ..
drwxr-xr-x  4 taewan  staff  136  2 10 00:00 ubuntu-VAGRANTSLASH-trusty64
taewan:demo taewan$ tree ~/.vagrant.d/boxes/ubuntu-VAGRANTSLASH-trusty64/
/Users/taewan/.vagrant.d/boxes/ubuntu-VAGRANTSLASH-trusty64/
├── 20160206.0.0
│   └── virtualbox
│       ├── Vagrantfile
│       ├── box-disk1.vmdk
│       ├── box.ovf
│       └── metadata.json
└── metadata_url

2 directories, 5 files
taewan:demo taewan$ 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Vagrant는 가상 이미지 관리하기 위해서 프로젝트를 만듭니다.
각 프로젝트의 최상위 디렉터리에는 Vagrantfile 파일이 위치합니다.
이 파일은 Vagrant로 관리되는 가상 이미지 설정을 포함합니다.&lt;/p&gt;

&lt;p&gt;프로젝트 최상위 디텍터리에서 &amp;ldquo;vagrant up&amp;rdquo; 명령을 최초로 실행하면 vagrant는 &amp;ldquo;~/vagrant.d/boxes&amp;rdquo;에 위치한 box 이미지를 복사하여 지정된 프로바이더에 맞는 가상 이미지를 생성하고 Guest OS를 실행합니다.&lt;/p&gt;

&lt;h2 id=&#34;vagrant-5분-실습:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 5분 실습&lt;/h2&gt;

&lt;p&gt;Vagrant로 CentOS 가상 인스턴스를 만들고 로그인하여 사용하는 간단한 데모를 진행하겠습니다.&lt;/p&gt;

&lt;h3 id=&#34;box-이미지-카탈로그-조회:47d9242757fa168a76ca0788ab673199&#34;&gt;Box 이미지 카탈로그 조회&lt;/h3&gt;

&lt;p&gt;현재 호스트 머신에 설치된 Box이미지의 목록을 조회합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;demo taewan$ vagrant box list
ubuntu/trusty64 (virtualbox, 20160206.0.0)
demo taewan$ 
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;현재 호스트 머신에는 CentOS 이미지가 없는 것을 확인 할 수 있습니다.
&amp;ldquo;Atlas box catalog&amp;rdquo;에서 CentOS를 검색합니다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&#34;http://taewan.kim/images/vagrant/box_catalog_centos.png&#34; alt=&#34;&#34; /&gt;&lt;/p&gt;

&lt;p&gt;위 검색 결과에서 &amp;ldquo;centos/7&amp;rdquo;을 사용할 것을 결정합니다.&lt;/p&gt;

&lt;h3 id=&#34;box-이미지-다운로드:47d9242757fa168a76ca0788ab673199&#34;&gt;Box 이미지 다운로드&lt;/h3&gt;

&lt;p&gt;&amp;ldquo;vagrant box add&amp;rdquo; 명령으로 앞으로 사용할 CentOS 기본 이미지를 다운로드 합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;demo taewan$ vagrant box add centos/7
==&amp;gt; box: Loading metadata for box &#39;centos/7&#39;
    box: URL: https://atlas.hashicorp.com/centos/7
This box can work with multiple providers! The providers that it
can work with are listed below. Please review the list and choose
the provider you will be working with.

1) libvirt
2) virtualbox

Enter your choice: 2
==&amp;gt; box: Adding box &#39;centos/7&#39; (v1509.01) for provider: virtualbox
    box: Downloading: https://atlas.hashicorp.com/centos/boxes/7/versions/1509.01/providers/virtualbox.box
==&amp;gt; box: Successfully added box &#39;centos/7&#39; (v1509.01) for &#39;virtualbox&#39;!
demo taewan$
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;설치가 완료되면 &amp;ldquo;vagrant box list&amp;rdquo;명령으로 설치 결과를 확인할 수 있습니다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;demo taewan$ vagrant box list
centos/7        (virtualbox, 1509.01)
ubuntu/trusty64 (virtualbox, 20160206.0.0)
demo taewan$
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;vagrant-프로젝트-생성-및-설정-파일-확인:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 프로젝트 생성 및 설정 파일 확인&lt;/h3&gt;

&lt;p&gt;Vagrant 프로젝트를 생성할 디렉터리를 생성한 후 Vagrant 프로젝트 초기화를 수행합니다.
프로젝트 초기화 명령(vagrant init)을 실행할 때 사용할 box를 지정할 수 있습니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;workspace taewan$ pwd
/Users/taewan/workspace
workspace taewan$ vagrant init centos/7
A `Vagrantfile` has been placed in this directory. You are now
ready to `vagrant up` your first virtual environment! Please read
the comments in the Vagrantfile as well as documentation on
`vagrantup.com` for more information on using Vagrant.
workspace taewan$ ls
Vagrantfile
workspace taewan$ tree
.
└── Vagrantfile

0 directories, 1 file
workspace taewan$ cat Vagrantfile 
# 주석 제거
Vagrant.configure(2) do |config|
  config.vm.box = &amp;quot;centos/7&amp;quot;
end
workspace taewan$
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;vagrant-가상-이미지-실행-및-ssh-접근:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 가상 이미지 실행 및 ssh 접근&lt;/h3&gt;

&lt;p&gt;&amp;ldquo;vagrant up&amp;rdquo;명령으로 가상 이미지를 실행하고 &amp;ldquo;vagrant ssh&amp;rdquo;명령으로 가상 이미지에 ssh 접근이 가능합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;workspace taewan$ vagrant up
Bringing machine &#39;default&#39; up with &#39;virtualbox&#39; provider...
==&amp;gt; default: Importing base box &#39;centos/7&#39;...
==&amp;gt; default: Matching MAC address for NAT networking...
==&amp;gt; default: Checking if box &#39;centos/7&#39; is up to date...
==&amp;gt; default: Setting the name of the VM: workspace_default_1455162125926_16977
==&amp;gt; default: Clearing any previously set network interfaces...
==&amp;gt; default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==&amp;gt; default: Forwarding ports...
    default: 22 (guest) =&amp;gt; 2222 (host) (adapter 1)
==&amp;gt; default: Booting VM...
==&amp;gt; default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: 
    default: Vagrant insecure key detected. Vagrant will automatically replace
    default: this with a newly generated keypair for better security.
    default: 
    default: Inserting generated public key within guest...
    default: Removing insecure key from the guest if it&#39;s present...
    default: Key inserted! Disconnecting and reconnecting using new SSH key...
==&amp;gt; default: Machine booted and ready!
==&amp;gt; default: Checking for guest additions in VM...
    default: No guest additions were detected on the base box for this VM! Guest
    default: additions are required for forwarded ports, shared folders, host only
    default: networking, and more. If SSH fails on this machine, please install
    default: the guest additions and repackage the box to continue.
    default: 
    default: This is not an error message; everything may continue to work properly,
    default: in which case you may ignore this message.
==&amp;gt; default: Installing rsync to the VM...
==&amp;gt; default: Rsyncing folder: /Users/taewan/workspace/ =&amp;gt; /home/vagrant/sync
workspace taewan$ vagrant ssh
[vagrant@localhost ~]$ uname -a
Linux localhost.localdomain 3.10.0-229.14.1.el7.x86_64 #1 SMP Tue Sep 15 15:05:51 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[vagrant@localhost ~]$ exit
logout
Connection to 127.0.0.1 closed.
workspace taewan$  
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;ssh-config-파일-수정:47d9242757fa168a76ca0788ab673199&#34;&gt;ssh config 파일 수정&lt;/h3&gt;

&lt;p&gt;간편한 접근을 위하여 vagant는 ssh config 설정을 제공하는 명령을 제공합니다.
&amp;ldquo;vagrant ssh-config &amp;ndash;host [hostname]&amp;rdquo; 명령으로 ssh config를 위한 내용을 확인할 수 있습니다.
이 결과는 리다이렉션을 이용하여 ~/.ssh/config에 적용할 수 있습니다.
ssh config가 적용된 이후에는 ssh [hostname]으로 접근 가능합니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;workspace taewan$ # ssh config 설정 확인
workspace taewan$ vagrant ssh-config --host demo 
Host demo
  HostName 127.0.0.1
  User vagrant
  Port 2222
  UserKnownHostsFile /dev/null
  StrictHostKeyChecking no
  PasswordAuthentication no
  IdentityFile &amp;quot;/Users/taewan/workspace/.vagrant/machines/default/virtualbox/private_key&amp;quot;
  IdentitiesOnly yes
  LogLevel FATAL

workspace taewan$ # ssh config 적용
workspace taewan$ vagrant ssh-config --host demo &amp;gt;&amp;gt; ~/.ssh/config
workspace taewan$ # ssh 접근
workspace taewan$ ssh demo
Last login: Wed Feb 10 22:43:45 2016 from 10.0.2.2
[vagrant@localhost ~]$ uname -a
Linux localhost.localdomain 3.10.0-229.14.1.el7.x86_64 #1 SMP Tue Sep 15 15:05:51 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux
[vagrant@localhost ~]$ exit
logout
Connection to 127.0.0.1 closed.
workspace taewan$
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;vagrant-상태-확인-및-종료:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 상태 확인 및  종료&lt;/h3&gt;

&lt;p&gt;다음 명령으로 Vagrant 인스턴스의 상태를 확인하고 종료할 수 있습니다.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;workspace taewan$ # 인스턴스 상태 확인
workspace taewan$ vagrant status
Current machine states:

default                   running (virtualbox)

The VM is running. To stop this VM, you can run `vagrant halt` to
shut it down forcefully, or you can run `vagrant suspend` to simply
suspend the virtual machine. In either case, to restart it again,
simply run `vagrant up`.
workspace taewan$ # 인스턴스 종료
workspace taewan$ vagrant destroy
    default: Are you sure you want to destroy the &#39;default&#39; VM? [y/N] y
==&amp;gt; default: Forcing shutdown of VM...
==&amp;gt; default: Destroying VM and associated drives...
workspace taewan$ # 인스턴스 상태 확인
workspace taewan$ vagrant status
Current machine states:

default                   not created (virtualbox)

The environment has not yet been created. Run `vagrant up` to
create the environment. If a machine is not created, only the
default provider will be shown. So if a provider is not listed,
then the machine is not created for that environment.
taewanui-MacBook-Pro:workspace taewan$ 
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;vagrant-명령-요약:47d9242757fa168a76ca0788ab673199&#34;&gt;Vagrant 명령 요약&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;vagrant -v : 버전 확인&lt;/li&gt;
&lt;li&gt;vagrant status : 현재 프로젝트의 가상 이미지 상태 요약&lt;/li&gt;
&lt;li&gt;vagrant global-status : 호스트 머신 전체의 Vagrant 가상 이미지들의 상태 확인&lt;/li&gt;
&lt;li&gt;vagrant up : Vagrant 가상 이미지 시작&lt;/li&gt;
&lt;li&gt;vagrant halt : 가상 인스턴스 강제 종료&lt;/li&gt;
&lt;li&gt;vagrant destroy : 가상 이미지 종료 및 기존 이미지 삭제&lt;/li&gt;
&lt;li&gt;vagrant suspend : 가상 인스턴스 하이버네이트, 상태 보존&lt;/li&gt;
&lt;li&gt;vagrant resume : 중지된 인스턴스 시작&lt;/li&gt;
&lt;li&gt;vagrant reload : 변경된 VagrantFile 적용&lt;/li&gt;
&lt;li&gt;vagrant ssh : 현재 프로젝트의 가상 이미지에 ssh 접근&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;reference:47d9242757fa168a76ca0788ab673199&#34;&gt;Reference&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gist.github.com/wpscholar/a49594e2e2b918f4d0c4&#34;&gt;https://gist.github.com/wpscholar/a49594e2e2b918f4d0c4&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.vagrantup.com/docs/&#34;&gt;https://www.vagrantup.com/docs/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Vagrant를 이용한 개발 환경 구성</title>
      <link>http://taewan.kim/blog/2015/02/01/vagrant_introduction/</link>
      <pubDate>Sun, 01 Feb 2015 18:04:41 +0900</pubDate>
      
      <guid>http://taewan.kim/blog/2015/02/01/vagrant_introduction/</guid>
      <description>

&lt;p&gt;Vagrant는 가상화 인스턴스인 Virtual Machine(VM)을 관리하는 소프트웨어입니다.
Vagrant는 &amp;ldquo;부랑자&amp;rdquo;/&amp;ldquo;정처없는 사람&amp;rdquo; 이라는 사전적인 의미를 갖습니다.
Vagrant는 가상화 이미지를 효과적으로 만들고 테스트하는 유연한 환경이라는 의미로 명명된 것으로 생각됩니다.
앞에서 설명한 것 처럼 Vagrant는 VM을 관리하는 소프트웨어로 여러 가상화 기술을 지원는 고수준 래퍼라고 할 수 있습니다.&lt;br /&gt;
Vagrant가 provider로 지원하는 기술은 다음과 같습니다.
- VirtualBox
- Vmware
- KVM
- Linux Container&lt;/p&gt;

&lt;p&gt;Vagrant의 개발 언어는 루비이며 2016.01 현재 최신 버전은 1.8입니다.
Vagrant는 초기에 VirtualBox를 근간으로 만들어 졌습니다.
여기에 버전 1.1부터 VMware와 KVM이 추가되었고, 버전 1.6에서는 Docker 컨테이너가 추가되었습니다.
Vagrant가 여러 Provider를 지원하기는 하지만, 여전히 기본 Provider는 VirtualBox입니다.&lt;/p&gt;

&lt;p&gt;Vagrant가 갖는 주요 특징은 다음과 같습니다.
* VM의 라이프사이클을 지원하면 간단한 CLI(Command-line Interface) 유틸리티
* VirtualBox기반으로 가상 머신 생성 자동화
* Chef와 Puppet을 사용한 프로비저닝 지원
* SSH 완전 지원
* VM에 고정 IP 할당 가능
* 호스트 머신에 포트 포워드 지원
* box로 이미지 배포
* 단일 명령으로 가상 머신을 완전히 리빌드&lt;/p&gt;

&lt;h2 id=&#34;vagrant-설치:5df5018d6687eb59ab586ab578cca973&#34;&gt;Vagrant 설치&lt;/h2&gt;

&lt;h2 id=&#34;quick-start-in-5-minute:5df5018d6687eb59ab586ab578cca973&#34;&gt;Quick Start in 5 Minute&lt;/h2&gt;

&lt;h2 id=&#34;vagrant-명령어-요약:5df5018d6687eb59ab586ab578cca973&#34;&gt;vagrant 명령어 요약&lt;/h2&gt;

&lt;h2 id=&#34;vagrantfile성-설정하기:5df5018d6687eb59ab586ab578cca973&#34;&gt;VagrantFile성 설정하기&lt;/h2&gt;

&lt;p&gt;###
###
###
###
###
###&lt;/p&gt;

&lt;h2 id=&#34;reference:5df5018d6687eb59ab586ab578cca973&#34;&gt;Reference&lt;/h2&gt;


&lt;div style=&#34;position: relative; padding-bottom: 56.25%; padding-top: 30px; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;//www.youtube.com/embed/w7Ft2ymGmfc&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%;&#34; allowfullscreen frameborder=&#34;0&#34;&gt;&lt;/iframe&gt;
 &lt;/div&gt;


&lt;hr /&gt;

&lt;p&gt;설치
    - virtualbox 설치
    - vagrant 설치&lt;/p&gt;

&lt;p&gt;gem install vagrant
vagrant box add lucid32 http://&amp;hellip;&amp;hellip;.box
vagrant init
vagrant up&lt;/p&gt;

&lt;p&gt;&amp;mdash;&amp;mdash;-getting started &amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;&amp;mdash;
* Vagrant가 virtualbox를 선호하는 이유
    * Just Free
    * 주요 플랫폼
    * Vagrant에 빌트-인 되어 있음&lt;/p&gt;

&lt;p&gt;vagrant init bashincorp/predics64
vagrant up
vagrant ssh&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&amp;ldquo;Ubuntu 12.04 LTS 64-bit&amp;rdquo; 가상화 구성 완료&lt;/li&gt;
&lt;li&gt;vagrant ssh&lt;/li&gt;
&lt;li&gt;vagrant destroy&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;vagrant-설정-vagrantfile:5df5018d6687eb59ab586ab578cca973&#34;&gt;Vagrant 설정: Vagrantfile&lt;/h1&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Vagrantfile 을 초기화하는 명령&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;vagrant init&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Boxes&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Vagrant가 빠른 가상머신 복제를 위해 사용하는 기본 이미지&lt;/li&gt;
&lt;li&gt;Vagrantfile에 사용할 box를 지정함&lt;/li&gt;
&lt;li&gt;모든 프로젝트는 Box의 초기 이미지를 클론하여 사용&lt;/li&gt;
&lt;li&gt;원본 이미지를 수정하지 않음&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Box 설치&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;vagrant box add hashicorp/precise64&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://atlas.hashicorp.com/boxes/search에서&#34;&gt;https://atlas.hashicorp.com/boxes/search에서&lt;/a&gt; 다운로드&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;설정:5df5018d6687eb59ab586ab578cca973&#34;&gt;설정&lt;/h2&gt;

&lt;p&gt;Vagrant.configure(&amp;ldquo;2&amp;rdquo;) do |config|
  config.vm.box = &amp;ldquo;hashicorp/precise64&amp;rdquo;
end&lt;/p&gt;

&lt;p&gt;HashiCorp&amp;rsquo;s Atlas box catalog: &lt;a href=&#34;https://atlas.hashicorp.com/boxes/search&#34;&gt;https://atlas.hashicorp.com/boxes/search&lt;/a&gt;
bento&lt;/p&gt;

&lt;p&gt;vagrant up
vagrant ssh
vagrant destory box 이미지를 제거하지 않음
vagrant box remove&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;동기화-폴더:5df5018d6687eb59ab586ab578cca973&#34;&gt;동기화 폴더&lt;/h2&gt;

&lt;p&gt;/vagrant&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ vagrant up
$ vagrant ssh
vagrant@precise64:~$ ls /vagrant
Vagrantfile
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;vagrant@precise64:~$ touch /vagrant/foo
vagrant@precise64:~$ exit
$ ls
foo Vagrantfile
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;VAGRANTFILE_API_VERSION = &amp;quot;2&amp;quot;
 
Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|
  config.vm.box = &amp;quot;precise32&amp;quot;
  config.vm.box_url = &amp;quot;http://files.vagrantup.com/precise32.box&amp;quot;
  # config.vm.network :forwarded_port, guest: 80, host: 8080
  # config.vm.network :private_network, ip: &amp;quot;192.168.33.10&amp;quot;
  # config.vm.network :public_network
  # config.ssh.forward_agent = true
  config.vm.provider &amp;quot;virtualbox&amp;quot; do |vm|
        vm.customize [
               &amp;quot;modifyvm&amp;quot;,:id,
               &amp;quot;--memory&amp;quot;,&amp;quot;512&amp;quot;,
               &amp;quot;--name&amp;quot;,&amp;quot;Terry_vagrant0&amp;quot;,
               &amp;quot;--cpus&amp;quot;,&amp;quot;2&amp;quot;,
                       ]
  end
end
&lt;/code&gt;&lt;/pre&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;shared-folder:5df5018d6687eb59ab586ab578cca973&#34;&gt;shared folder&lt;/h2&gt;

&lt;p&gt;vagrant@precise64:~$ touch /vagrant/foo
vagrant@precise64:~$ exit
$ ls
foo Vagrantfile&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&#34;provisioning:5df5018d6687eb59ab586ab578cca973&#34;&gt;provisioning&lt;/h2&gt;

&lt;p&gt;#!/usr/bin/env bash&lt;/p&gt;

&lt;p&gt;apt-get update
apt-get install -y apache2
if ! [ -L /var/www ]; then
  rm -rf /var/www
  ln -fs /vagrant /var/www&lt;/p&gt;

&lt;h2 id=&#34;fi:5df5018d6687eb59ab586ab578cca973&#34;&gt;fi&lt;/h2&gt;

&lt;p&gt;Vagrant.configure(&amp;ldquo;2&amp;rdquo;) do |config|
  config.vm.box = &amp;ldquo;hashicorp/precise64&amp;rdquo;
  config.vm.provision :shell, path: &amp;ldquo;bootstrap.sh&amp;rdquo;&lt;/p&gt;

&lt;h2 id=&#34;end:5df5018d6687eb59ab586ab578cca973&#34;&gt;end&lt;/h2&gt;

&lt;p&gt;vagrant 파일 기준 상대 경로&lt;/p&gt;

&lt;p&gt;vagrant reload &amp;ndash;provision&lt;/p&gt;

&lt;p&gt;Configuration of communications between VMs&lt;/p&gt;

&lt;p&gt;Vagrant는
- VirtualBox
- VMWare
- AWS&lt;/p&gt;

&lt;p&gt;Provider를 설치한 후
$ vagrant up &amp;ndash;provider=vmware_fusion
$ vagrant up &amp;ndash;provider=aws
&amp;ldquo;vagrant up&amp;rdquo;에서만 provider를 지정하면 옵션을 사용합니다.
다른 vagrant 명령에서는 provider를 별도로 지정할 필요가 없습니다.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>